# J. Форматирование документа 

Документ - последовательность абзацев
Абзац - последовательность элементов
Токен - слово или рисунок

Токены разделены пробелами и/или переводом строки

Абзацы разделены пустой строкой (cтрока, состоящая только из пробелов)

Слово - /a-zA-Z0-9.,:;!?-'/

Рисунок - (image width=123 height=123 layout=embedded|surrounded|floating)
1. между параметрами могут быть /(\s|\n)/+
2. layout:
  - embedded (в тексте)
  - surrounded (обтекание текстом)
  - floating (свободное)

Документ размещается на бесконечной вверх и вниз странице шириной w пикселей (разбиение на конечные по высоте страницы планируется в следующей версии редактора). Одна из точек на левой границе страницы условно считается точкой с ординатой равной нулю. Ордината увеличивается вниз.

Размещение документа происходит следующим образом. Абзацы размещаются по очереди. Первый абзац размещается так, что его верхняя граница имеет ординату 0.



(Абзац размещается следующим образом)[./section.png] 

Строка по дефолту высоты h
В процессе размещения рисунков высота строк может увеличиваться (embedded)
Строки могут разбиваться рисунками на фрагменты (surrounded)


(Слова размещаются следующим образом.)[./words.png] 
Слово
1. c - ширина любого символа одинакова, в том числе и пробела

## Фрагмент
1. перед каждым словом пробел (кроме первого во фрагменте)
2. Если слово не помещается, во фрагмент, то ищется следующий свободный, если туда тоже, то ищется дальше, причем может уже на следующей строчке
3. Слово прижимается к верхней границе строки

Рисунок
1. embedded, то ведёт себя как слово, но может поменять высоту строки
  - (word) прижимается к верху и с пробелом перед ним, если он не первый во фрагменте
  - его ширина равна width.
  - если height > высоты строки, то высота строки становится height вниз (смещается нижняя граница строки)
2. surrounded
  - Сначала находится первый фрагмент, в котором рисунок помещается по ширине
  - Перед рисунком этого типа не ставится пробел!
  - Верхний край рисунка совпадает с верхней границей строки, в которой находится найденный фрагмент, а сам рисунок продолжается вниз (не влияет на высоту строки)
  - При этом строки, через которые он проходит, разбиваются им на фрагменты.
3. floating
  - рисунок размещается поверх текста и других рисунков и никак с ними не взаимодействует
  - В этом случае у рисунка есть два дополнительных параметра: "dx" и "dy" — целые числа, задающие смещение в пикселях верхнего левого угла рисунка вправо и вниз, относительно позиции, где находится верхний правый угол предыдущего слова или рисунка (или самой левой верхней точки первой строки абзаца, если рисунок — первый элемент абзаца).
  - Если при размещении рисунка таким образом он выходит за левую границу страницы, то он смещается вправо, так, чтобы его левый край совпадал с левой границей страницы
  - Аналогично, если рисунок выходит за правую границу страницы, то он смещается влево, чтобы его правый край совпадал с правой границей страницы.

Верхняя граница следующего абзаца совпадает с самой низкой точкой из нижней границы последней строки и самой нижней границы рисунков типа "surrounded" предыдущего абзаца.

По заданным w, h, c и документу найдите координаты верхних левых углов всех рисунков в документе.

## Формат ввода
Первая строка входного файла содержит три целых числа: w, h и c (1 ≤ w ≤ 1000, 1 ≤ h ≤ 50, 1 ≤ c ≤ w).


## Формат вывода
Выведите в выходной файл по два числа для каждого рисунка — координаты его верхнего левого угла. Выводите координаты рисунков в том порядке, в котором они встречаются во входном файле.

Пример 1
120 10 8
start (image layout=embedded width=12 height=5)
(image layout=surrounded width=25 height=58)
and word is 
(image layout=floating dx=18 dy=-15 width=25 height=20)
here new 
(image layout=embedded width=20 height=22)
another
(image layout=embedded width=40 height=19)
longword

new paragraph
(image layout=surrounded width=5 height=30)
(image layout=floating width=20 height=35 dx=50 dy=-16)
48 0
60 0
74 -5
32 20
0 52
104 81
100 65
Пример 2
Ввод	Вывод
1000 2 3
Пример 3
Ввод	Вывод
100 2 3
(image dx=10 dy=11 height=100 width=20 layout=floating)
10 11