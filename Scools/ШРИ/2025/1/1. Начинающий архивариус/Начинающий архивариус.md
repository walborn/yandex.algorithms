24 апр. 17:08

Люба, начинающий разработчик, получила первый большой проект: нужно цифровизировать архив документов и сделать удобный поиск. С первой частью она уже справилась: все документы разбиты на секции и хранятся в специальным образом организованном хранилище json-ов. Теперь ей предстоит реализовать функцию, которая будет осуществлять поиск по этим документам.

## Условия:

Каждый документ имеет:

- id,
- список версий этого документа,
- список документов, от которых зависит.

Каждая версия имеет:

- дату начала периода действия в UTC,
- дату окончания периода действия в UTC,
- текст документа.

На вход функции будет передаваться 3 аргумента:

- дата начала периода в таймзоне пользователя в формате YYYY-MM-DD
- дата окончания периода в таймзоне пользователя в формате YYYY-MM-DD
- массив документов.

Функция должна вернуть тексты всех документов, которые были активными в этот период, в порядке появления в исходном массиве. Версия считается активной, только если у всех документов из массива deps документа есть актуальные на данный период версии. Если в течение запрошенного периода версии менялись - нужно вернуть последнуюю актуальную. Если какой-то документ закончил своё действие в этот период - вернуть последнюю актуальную версию. Если действие версии не ограничено справа или слева, там будет null.

## Пример использования:

Вызов `search('2025-01-01', '2025-02-01', {...})` должен вернуть массив строк типа `['string13', 'string24']`;

## Пример:

**Входные данные:**

```
'2025-02-01'
'2025-02-28'
[
    {
        id: '1',
        deps: ['2'],
        versions: [
            {
                 from: '2025-01-01T00:00:00Z',
                 to: '2025-02-01T00:00:00Z',
                 text: 'String 11',
            },
            {
                 from: '2025-02-01T00:00:00Z',
                 to: '2025-03-01T00:00:00Z',
                 text: 'String 12',
            },
            {
                 from: '2025-03-01T00:00:00Z',
                 to: '2025-04-01T00:00:00Z',
                 text: 'String 13',
            },
        ],
    },
    {
        id: '2',
        deps: [],
        versions: [
            {
                 from: '2025-01-01T00:00:00Z',
                 to: '2025-02-01T00:00:00Z',
                 text: 'String 21',
            },
            {
                 from: '2025-02-01T00:00:00Z',
                 to: '2025-03-01T00:00:00Z',
                 text: 'String 22',
            },
            {
                 from: '2025-03-01T00:00:00Z',
                 to: '2025-04-01T00:00:00Z',
                 text: 'String 23',
            },
        ],
    },
]
```

**Ответ:** `['String 12', 'String 22']`

Ваше решение должно быть экспортировано в виде модуля: `module.exports = { search };`

Код

.js

Отправить ответ

1

​